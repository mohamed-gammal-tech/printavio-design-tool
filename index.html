<!-- <?php
$host = 'sxb1plzcpnl504560';
$dbname = 'printavio';
$username = 'admin';
$password = '123456';

// Establish database connection using PDO
$pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8", $username, $password);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$user_id = 5; 

try {
    $stmt = $pdo->prepare("SELECT designs.design_id, designs.title, designs.description, images.image_placeholder_src FROM designs JOIN images ON designs.design_id = images.design_id WHERE designs.user_id = ?");
    $stmt->execute([$user_id]);
    $designs = $stmt->fetchAll(PDO::FETCH_ASSOC);
} catch (PDOException $e) {
    die("Could not connect to the database $dbname :" . $e->getMessage());
}
?> -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customize Your Product</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="jquery-ui-1.13.3/jquery-ui.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="loggedHeader.css" />
    <link rel="stylesheet" href="footer.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <style>
        
    </style>
</head>
<body>
    <!-- header start -->
    <div id="header-placeholder"></div>
    <section class="customize">

        <div class="productCustomize">

            <div class="Products">
                <h3>Products:</h3>
                <button class="art-pre-btn">
                    <a class="prev">&#10095;</a>
                  </button>
                  <button class="art-nxt-btn">
                    <a class="next">&#10095;</a>
                  </button>
                <div class="products-wrap">
                    <div class="product" data-type="male_tshirt" data-name="Male T-shirt" data-id="1">
                        <span class="vector-src">
                            <img src="template/male_tshirt_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Men t-shirt
                        </span>
                    </div>

                    <div class="product" data-type="male_premium_hoodie" data-name="Male Hoodie" data-id="2">
                        <span class="vector-src">
                            <img src="template/male_premium_hoodie_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Male Hoodie
                        </span>
                    </div>
                    <div class="product" data-type="female_premium_hoodie" data-name="Female Hoodie" data-id="2">
                        <span class="vector-src">
                            <img src="template/female_premium_hoodie_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Female Hoodie
                        </span>
                    </div>
    
                    <div class="product" data-type="men_sweetshirt" data-name="Male Sweet-Shirt" data-id="7">
                        <span class="vector-src">
                            <img src="template/men_sweetshirt_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                           Men SweetShirt
                        </span>
                    </div>
                    <div class="product" data-type="girl_sweatshirt" data-name="Female Sweet-Shirt" data-id="7">
                        <span class="vector-src">
                            <img src="template/girl_sweatshirt_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Female SweetShirt
                        </span>
                    </div>
    
                    <div class="product" data-type="mug" data-name="Mug" data-id="4">
                        <span class="vector-src">
                            <img src="template/mug_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Mug
                        </span>
                    </div>
    
                    <div class="product" data-type="poster" data-name="Poster" data-id="8">
                        <span class="vector-src">
                            <img src="template/poster_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Poster
                        </span>
                    </div>
    
                    <div class="product" data-type="canvas" data-name="Canvas" data-id="">
                        <span class="vector-src">
                            <img src="template/canvas_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Canvas
                        </span>
                    </div>
    
                    <div class="product" data-type="notebook" data-name="NoteBook" data-id="18">
                        <span class="vector-src">
                            <img src="template/notebook_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Notebook
                        </span>
                    </div>
    
                    <div class="product" data-type="phone case" data-name="Phone Case" data-id="">
                        <span class="vector-src">
                            <img src="template/phone case_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            PhoneCase
                        </span>
                    </div>
    
                    <div class="product" data-type="Pillow" data-name="Pillow" data-id="22">
                        <span class="vector-src">
                            <img src="template/Pillow_white.png" alt="Product Display" loading="lazy">
                        </span>
                        <span class="description">
                            Pillow
                        </span>
                    </div>
    
                </div>
            </div>
            
            <div class="continer">
                <div class="options">
                    <h3>Choose Design:</h3>
                    <div class="upload-section">
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadModal">
                            Upload New
                        </button>
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#designsModal">
                            Your Designs
                        </button>
                    </div>
    
                    <div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="uploadModalLabel">Upload Design</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <!-- Form Start -->
                                    <form id="uploadForm">
                                        <div class="mb-3">
                                            <label for="designTitle" class="form-label">Design Title</label>
                                            <input type="text" class="form-control" id="designTitle" name="designTitle" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="designDescription" class="form-label">Description</label>
                                            <textarea class="form-control" id="designDescription" name="designDescription" rows="3" required></textarea>
                                        </div>
                                        <div class="mb-3">
                                            <label for="designFile" class="form-label">Upload File</label>
                                            <input type="file" class="form-control" id="designFile" name="designFile" required>
                                        </div>
                                        <button type="button" id="submitBtn" class="btn btn-primary">Save Design</button>
                                    </form>
                                    <!-- Form End -->
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="modal fade" id="designsModal" tabindex="-1" aria-labelledby="designsModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="designsModalLabel">Designs Gallery</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body desingModal">
                              <?php if (!empty($designs)): ?>
                                  <div class="row">
                                      <?php foreach ($designs as $design): ?>
                                        <div class="col-md-4 mb-3">
                                            <div class="card design-card" data-base64="<?php echo htmlspecialchars($design['image_placeholder_src']); ?>" data-designId="<?php echo htmlspecialchars($design['design_id']); ?>" data-designtitle="<?php echo htmlspecialchars($design['title']); ?>">
                                                <img src="<?php echo htmlspecialchars($design['image_placeholder_src']); ?>" class="card-img-top" alt="Design">
                                                <div class="card-body">
                                                    <h5 class="card-title"><?php echo htmlspecialchars($design['title']); ?></h5>
                                                    <p class="card-text"><?php echo htmlspecialchars($design['description']); ?></p>
                                                </div>
                                            </div>
                                        </div>
                                      <?php endforeach; ?>
                                  </div>
                              <?php else: ?>
                                  <p>No designs found.</p>
                              <?php endif; ?>
                            </div>
                          </div>
                        </div>
                      </div>
    
                    <h3>Customization Tools:</h3>
                    <div class="image-controls">
    
                        <div class="rotate-slider">
                            <label for="rotate-slider" >Rotate:</label>
                            <input type="range" id="rotate-slider" min="0" max="360" value="0">
                        </div>
    
                        <div class="control">
                            <label for="saturation-slider">Saturation:</label>
                            <input type="range" id="saturation-slider" min="0" max="200" value="100">
                        </div>
                        <div class="control">
                            <label for="brightness-slider">Brightness:</label>
                            <input type="range" id="brightness-slider" min="0" max="200" value="100">
                        </div>
                        <div class="control">
                            <label for="contrast-slider">Contrast:</label>
                            <input type="range" id="contrast-slider" min="0" max="200" value="100">
                        </div>
                    </div>
    
                    <div class="control-options">
                        <button id="resetImageBtn">Reset Default</button>
                        <button id="applyFilterBtn">Apply Filter</button>
                    </div>
    
                    <h3>Select Color: <span id="selectedColor"></span></h3>
                    <div id="colorPicker">
                        
                    </div>
                    
                        <h3>Set Price: </h3>
                        <div class="price-Set">
    
                            <div class="setprice">
                                <label for="priceInput">Enter price:</label>
                                <input type="number" id="priceInput" value="250" min="250" max="1000" style="width: 100px;"> EGP
                            </div>
                            <div class="sellFor">
                                <label for="priceRange">Sell it for: <span id="basePriceDisplay" style="color: green;">250 EGP</span></label>
                                <input type="range" id="priceRange" min="250" max="1000" value="250">
                            </div>
                            <div class="earning">
                                You will earn: <span id="profitDisplay" style="color: green;">0 EGP</span>
                            </div>
                        </div>
    
                    <label style="margin-top: 10px;">
                        <input type="checkbox" id="toggleBorders">
                        Hide Customization Borders
                    </label>
                    <button id="saveBtn">Save & Add to Shop</button>
    
                    
                    <input type="hidden" id="design-image" name="design-image">
                    <input type="hidden" id="originalImageSrc">
                    <input type="hidden" id="design-custom" name="design-custom">
    
                    <input type="hidden" id="user_id" name="user_id">
                    <input type="hidden" id="product-image" name="product-image">
                    <input type="hidden" id="mockup-image" name="mockup-image">
                    <input type="hidden" id="design-id" name="design-id">
                    <input type="hidden" id="designName" name="designName">
                    <input type="hidden" id="productPrice" name="productPrice">
                    <input type="hidden" id="artistProfit" name="artistProfit">
                    <input type="hidden" id="productName" name="productName">
    
                </div>
    
            <div class="vectortemp">
                <div id="watermarkOverlay">
                    Printavio.com
                </div>
                <div id="overlay-cover"></div>
                <img src="template/male_tshirt_white.png" id="displayImage" alt="Product Display" style="width: 500px; height: auto;">
                <div class="mockupCanvas">
                    <div class="design-wrap">
                        <img src="template/yourdesign.png" id="overlayImage" alt="Overlay Image" style="display: none; position: absolute; width: 100px; cursor: move;">
                    </div>
                </div>
                <div class="loadingDiv" >
                    <div class="lds-default"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
                </div>
            </div>
        </div>
        </div>

    </section>
    <div id="footer-placeholder"></dive>
    <script src="src/jquery-3.7.1.min.js"></script>
    <script src="jquery-ui-1.13.3/jquery-ui.min.js"></script>
    <script src="src/html2canvas.min.js"></script>
    <script src="src/jquery.plugin.html2canvas.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script> -->
    <script>    
    </script>
    <script src="script.js"></script>
</body>
</html>
